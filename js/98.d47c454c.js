"use strict";(self["webpackChunkfinal_project"]=self["webpackChunkfinal_project"]||[]).push([[98],{6098:function(t,i,e){e.r(i),e.d(i,{default:function(){return ot}});var s=e(6768),o=e(4232),a=e(5130);const r={class:"container"},c={class:"row"},l={class:"col-8 container-top"},n={"aria-label":"breadcrumb"},d={class:"breadcrumb"},u={class:"breadcrumb-item"},p={class:"breadcrumb-item active","aria-current":"page"},h={class:"row justify-content-center"},g={class:"col-5"},k={class:"text-center product-image-container"},v=["src"],m={class:"col-3 product-description-container"},L=(0,s.Lk)("br",null,null,-1),b={class:"productDescription"},y=(0,s.Lk)("hr",{style:{width:"100%"}},null,-1),f={key:0,class:"h5"},C={key:1,class:"h6"},I={key:2,class:"h5"},w=(0,s.Lk)("hr",{style:{width:"100%"}},null,-1),_=(0,s.Lk)("label",{for:"price",class:"form-label"},"購買數量",-1),q={class:"quantity-wrapper"},$=(0,s.Lk)("hr",{style:{width:"100%"}},null,-1),x={key:0,class:"spinner-grow spinner-grow-sm text-danger",role:"status"},S=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),E=[S],P=(0,s.Lk)("i",{class:"bi bi-suit-heart-fill"},null,-1),X={class:"center-content col-8 mx-auto"},F=(0,s.Lk)("p",{style:{color:"#b78989"}},"商品特色",-1),Q=(0,s.Lk)("hr",null,null,-1),N={style:{"white-space":"pre-wrap","text-align":"left"}},J=(0,s.Lk)("div",{class:"seperator"},null,-1),O=(0,s.Lk)("h2",null,"您可能還會喜歡...",-1),T=(0,s.Lk)("hr",null,null,-1),j={class:"container"},U={class:"row"},W={class:"product-container"},A=["onClick"],B={class:"title-cart"},K=["onClick"],D={class:"actions"},M=["disabled","onClick"],V={key:0,class:"spinner-grow spinner-grow-sm text-danger",role:"status"},z=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),G=[z],H=(0,s.Lk)("i",{class:"bi bi-cart-fill"},null,-1),R=["onClick"],Y={style:{color:"#CE0000"}};function Z(t,i,e,S,z,Z){const tt=(0,s.g2)("Loading"),it=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(tt,{active:z.isLoading},null,8,["active"]),(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[(0,s.Lk)("div",l,[(0,s.Lk)("nav",n,[(0,s.Lk)("ol",d,[(0,s.Lk)("li",u,[(0,s.bF)(it,{to:"/user/cart",style:{"text-decoration":"none",color:"inherit","font-weight":"normal"}},{default:(0,s.k6)((()=>[(0,s.eW)("購物車")])),_:1})]),(0,s.Lk)("li",p,(0,o.v_)(z.product.title),1)])])])]),(0,s.Lk)("div",h,[(0,s.Lk)("article",g,[(0,s.Lk)("div",k,[(0,s.Lk)("img",{src:z.product.imageUrl,alt:"",class:"img-fluid mb-3 product-image",id:"image_id"},null,8,v)])]),(0,s.Lk)("div",m,[(0,s.Lk)("h3",null,(0,o.v_)(z.product.title),1),L,(0,s.Lk)("div",b,(0,o.v_)(z.product.description),1),y,z.product.price?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",f,(0,o.v_)(z.product.origin_price)+" 元",1)),z.product.price?((0,s.uX)(),(0,s.CE)("del",C,"$ "+(0,o.v_)(z.product.origin_price),1)):(0,s.Q3)("",!0),z.product.price?((0,s.uX)(),(0,s.CE)("div",I,"$ "+(0,o.v_)(z.product.price),1)):(0,s.Q3)("",!0),w,_,(0,s.Lk)("div",q,[(0,s.Lk)("button",{class:"btn btn-outline-secondary",onClick:i[0]||(i[0]=(...t)=>Z.decrement&&Z.decrement(...t))},"-"),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":i[1]||(i[1]=t=>z.product.qty=t),placeholder:"請輸入數量",onInput:i[2]||(i[2]=(...t)=>Z.validateQuantity&&Z.validateQuantity(...t))},null,544),[[a.Jo,z.product.qty,void 0,{number:!0}]]),(0,s.Lk)("button",{class:"btn btn-outline-secondary",onClick:i[3]||(i[3]=(...t)=>Z.increment&&Z.increment(...t))},"+")]),$,(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:i[4]||(i[4]=t=>Z.addToCart(z.product.id,z.product.qty))},[z.status.loadingItem===z.product.id?((0,s.uX)(),(0,s.CE)("div",x,E)):(0,s.Q3)("",!0),(0,s.eW)(" 加入購物車 ")]),(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:i[5]||(i[5]=t=>Z.addFavorite(z.product.id))},[P,(0,s.eW)(" 加入收藏 ")])])]),(0,s.Lk)("div",X,[F,Q,(0,s.Lk)("div",N,(0,o.v_)(z.product.content),1)])]),J,O,T,(0,s.Lk)("div",j,[(0,s.Lk)("div",U,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Z.graduateProducts,(t=>((0,s.uX)(),(0,s.CE)("div",{class:"col-md-4 mb-4",key:t.id},[(0,s.Lk)("div",W,[((0,s.uX)(),(0,s.CE)("div",{class:"product-image-grid",key:t.id,style:(0,o.Tr)({backgroundImage:`url(${t.imageUrl})`}),onClick:i=>Z.navigateToProduct(t.id)},null,12,A)),(0,s.Lk)("div",B,[(0,s.Lk)("p",{onClick:i=>Z.navigateToProduct(t.id)},(0,o.v_)(t.title),9,K),(0,s.Lk)("div",D,[(0,s.Lk)("button",{type:"button",class:"btn",disabled:this.status.loadingItem===t.id,onClick:i=>Z.addCart(t.id)},[this.status.loadingItem===t.id?((0,s.uX)(),(0,s.CE)("div",V,G)):(0,s.Q3)("",!0),H],8,M),(0,s.Lk)("i",{class:(0,o.C4)(z.favoriteItems.includes(t.id)?"bi bi-suit-heart-fill":"bi bi-suit-heart"),onClick:i=>Z.addFavoriteButtom(t.id)},null,10,R)])]),(0,s.Lk)("p",Y,"$"+(0,o.v_)(t.price),1)])])))),128))])])],64)}e(4114);var tt=e(2389),it={data(){return{product:{qty:1},id:"",isLoading:!1,status:{loadingItem:""},favorite:"",products:[],favoriteItems:[]}},methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/api/applehung1-api/product/${this.id}`;this.isLoading=!0,this.$http.get(t).then((t=>{console.log(t.data),this.isLoading=!1,t.data.success&&(this.product=t.data.product,(!this.product.qty||this.product.qty<1)&&(this.product.qty=1))}))},addToCart(t,i){const e="https://vue3-course-api.hexschool.io/api/applehung1-api/cart";this.status.loadingItem=t;const s={product_id:t,qty:i};this.isLoading=!0,this.$http.post(e,{data:s}).then((t=>(this.isLoading=!1,this.status.loadingItem="",this.$httpMessageState(t,"加入購物車"),this.getCart()))).then((t=>{this.$emit("cart-updated",this.cart),console.log("觸發updateCart",this.cartItemCount)}))},addFavorite(t){const i=JSON.parse(localStorage.getItem("favoriteItems"))||[];i.includes(t)||(i.push(t),localStorage.setItem("favoriteItems",JSON.stringify(i))),console.log("favorite emit:",t)},increment(){this.product.qty+=1},decrement(){this.product.qty>1&&(this.product.qty-=1)},validateQuantity(){(isNaN(this.product.qty)||this.product.qty<1)&&(this.product.qty=1)},getProducts(){const t="https://vue3-course-api.hexschool.io/api/applehung1-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,console.log("products:",t),this.isLoading=!1}))},navigateToProduct(t){this.$router.push(`/user/product/${t}`).then((()=>{window.location.reload()}))},addCart(t){const i="https://vue3-course-api.hexschool.io/api/applehung1-api/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(i,{data:e}).then((t=>(this.status.loadingItem="",console.log("addcart-res",t),this.getCart()))).then((t=>{this.$emit("cart-updated",this.cart),console.log("觸發addCart",this.cartItemCount)}))},addFavoriteButtom(t){const i=JSON.parse(localStorage.getItem("favoriteItems"))||[];if(i.includes(t)){const e=i.indexOf(t);e>-1&&(i.splice(e,1),localStorage.setItem("favoriteItems",JSON.stringify(i)),this.favoriteItems=i)}else i.push(t),localStorage.setItem("favoriteItems",JSON.stringify(i)),this.favoriteItems=i;console.log("favorite emit:",t)}},created(){this.id=this.$route.params.productId,this.getProduct(),this.getProducts()},mixins:[tt.A],computed:{graduateProducts(){return this.products.filter((t=>t.category===this.product.category)).slice(0,3)}}},et=e(1241);const st=(0,et.A)(it,[["render",Z]]);var ot=st}}]);
//# sourceMappingURL=98.d47c454c.js.map