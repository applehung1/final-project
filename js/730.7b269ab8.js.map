{"version":3,"file":"js/730.7b269ab8.js","mappings":"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","sources":["webpack://final-project/./src/mixins/cartMixin.js","webpack://final-project/./src/views/UserList.vue","webpack://final-project/./src/views/UserList.vue?1332"],"sourcesContent":["export default {\r\n  data () {\r\n    return {\r\n      cart: {},\r\n      isLoading: false,\r\n      cartItemCount: 0, // 用於存儲購物車商品數量\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      return new Promise((resolve, reject) => {\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n        this.isLoading = true\r\n        this.$http.get(url)\r\n          .then((response) => {\r\n            console.log(response)\r\n            this.cart = response.data.data\r\n            this.cartItemCount = this.cart.carts.reduce((total, item) => total + item.qty, 0)\r\n            this.isLoading = false\r\n            resolve(response) // 確保 Promise 被 resolved\r\n          })\r\n          .catch((error) => {\r\n            this.isLoading = false\r\n            reject(error) // 確保 Promise 被 rejected\r\n          })\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getCart()\r\n  }\r\n}\r\n","<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"container\">\r\n    <div class=\"container-inside\">\r\n      <aside id=\"sidebar\" class=\"left-sidebar col-md-3\">\r\n        <h4 class=\"widget-title\">購買花禮Online Shop</h4>\r\n        <hr>\r\n        <div class='search-area'>\r\n          <input type=\"text\" class=\"form-control\" name=\"name\"\r\n        placeholder=\"(請輸入商品名稱)\"\r\n        v-model=\"searchQuery\">\r\n          <i class=\"bi bi-search search-icon\" @click=\"performSearch\"></i> <!-- 新增搜尋按鈕 -->\r\n        </div>\r\n            <div class=\"widget_categories\">\r\n              <ul>\r\n                <li v-for=\"(item, index) in uniqueCategories\" :key=\"index\"\r\n                :class=\"{ active: item === activeCategory }\">\r\n                  <a href=\"#\" @click.prevent=\"filterByCategory(item)\">\r\n                    {{ item }}\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n      </aside>\r\n      <div class=\"col-md-9\">\r\n        <header class=\"content-top clearfix\">\r\n          <h1 class=\"main-title\">購買花禮Online Shop</h1>\r\n          <div class=\"content-top-right\">\r\n            <div class=\"sort-block\">\r\n              <label for=\"sortOrder\">排序方式：</label>\r\n                <select id=\"sortOrder\" class=\"form-select\" v-model=\"selectedSortOrder\" @change=\"sortProducts\">\r\n                  <option value=\"\" disabled>請選擇排序方式</option>\r\n                  <option value=\"priceAsc\">價格由低到高</option>\r\n                  <option value=\"priceDesc\">價格由高到低</option>\r\n                </select>\r\n            </div>\r\n            <ul class=\"breadcrumb\">\r\n              <li><router-link class=\"home-router-li\" to=\"/\">首頁</router-link></li>\r\n              <li>/</li>\r\n              <li>購買花禮Online Shop</li>\r\n            </ul>\r\n          </div>\r\n        </header>\r\n        <hr>\r\n        <div class=\"product-grid\">\r\n          <!-- 修改 v-for 循環，使用 filteredProducts -->\r\n          <div class=\"product-item\" v-for=\"item in filteredProducts\" :key=\"item.id\">\r\n            <div class=\"product-item-list\">\r\n              <div style=\"height: 180px; background-size: cover; background-position: center\"\r\n                   :style=\"{backgroundImage: `url(${item.imageUrl})`}\"\r\n                   @click=\"getProduct(item.id)\"></div>\r\n                   <div class=\"title-cart\">\r\n                        <p @click=\"getProduct(item.id)\">{{ item.title }}</p>\r\n                        <button type=\"button\" class=\"btn\"\r\n                            :disabled=\"this.status.loadingItem === item.id\"\r\n                            @click=\"addCart(item.id)\">\r\n                        <div v-if=\"this.status.loadingItem === item.id\" class=\"spinner-grow spinner-grow-sm text-danger\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                            <i class=\"bi bi-cart-fill\"></i>\r\n                        </button>\r\n                   </div>\r\n              </div>\r\n              <div class=\"price\">\r\n                <div class=\"h5\" v-if=\"!item.price\">{{ item.origin_price }} </div>\r\n                <del class=\"h6\" v-if=\"item.price\">$ {{ item.origin_price }} </del>\r\n                <div class=\"h7\" v-if=\"item.price\">$ {{ item.price }} </div>\r\n              </div>\r\n          </div>\r\n          <!-- 動態添加占位符 -->\r\n          <div\r\n            v-for=\"n in (3 - (filteredProducts.length % 3))\"\r\n            :key=\"`placeholder-${n}`\"\r\n            class=\"product-placeholder\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n      <!-- 購物車列表 -->\r\n      <!-- form -->\r\n      <div class=\"my-5 row justify-content-center\"></div>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n/* *{outline: 1px solid #000;} */\r\n.container-inside {\r\n  display: flex;\r\n}\r\n.left-sidebar hr {\r\n  width: 86%;\r\n  margin-left: 32px; /* 往右移 */\r\n}\r\n\r\n.search-area {\r\n  margin-left: 32px;\r\n  position: relative; /* 讓子元素相對於父元素定位 */\r\n  display: flex;\r\n}\r\n\r\n.search-area input {\r\n  padding-right: 30px; /* 為輸入框添加內邊距，避免文字與圖示重疊 */\r\n  border-radius: 0;\r\n  width: 278px;\r\n  height: 45px;\r\n}\r\n.search-icon {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 50%;\r\n  transform: translateY(-50%); /* 讓圖示垂直居中 */\r\n  cursor: pointer;\r\n}\r\n\r\n.content-top {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding-top: 20px;\r\n}\r\n.content-top-right {\r\n  display: flex;\r\n  right: 0px;\r\n  margin-left: auto; /* 推到右邊 */\r\n  color: #555555;\r\n}\r\n\r\n.widget-title {\r\n  padding: 20px 0px 20px 30px;\r\n}\r\n\r\n.widget_categories ul li {\r\n  list-style-type: none;\r\n  font-weight: 600;\r\n  border: 1px solid #ddd; /* 添加一個淺灰色的邊線 */\r\n  padding: 3px; /* 增加內部填充，使邊線不緊貼內容 */\r\n  margin: 13px;\r\n  margin-left: 0px;\r\n  text-align: left;\r\n}\r\n.widget_categories ul li a {\r\n  text-decoration: none; /* 去除 a 標籤的下劃線 */\r\n  font-size: 15px;\r\n  display: block;\r\n  padding: 7px 10px 7px 25px;\r\n  line-height: 24px;\r\n  color: #777;\r\n}\r\n.widget_categories ul li.active a {\r\n  font-weight: bold; /* 加粗字體 */\r\n  background-color: #e6e6e6; /* 添加背景色 */\r\n  border-color: #000; /* 改變邊框顏色 */\r\n}\r\n\r\n.main-title {\r\n  font-size: 18px;\r\n  color: #555555;\r\n}\r\n.breadcrumb li{\r\n  margin-left: 5px;\r\n}\r\n.home-router-li {\r\n  text-decoration: none;\r\n  color: inherit;\r\n}\r\n\r\n.product-grid {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px; /* 控制商品間的間距 */\r\n  padding-top: 10px;\r\n}\r\n\r\n.product-item {\r\n  flex: 1 1 calc(33.333% - 20px); /* 使每個商品占三分之一的寬度 */\r\n  box-sizing: border-box;\r\n  padding: 10px;\r\n  background: #f9f9f9;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n}\r\n\r\n.product-item-list {\r\n  cursor: pointer;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.product-item-list:hover {\r\n  transform: scale(1.05); /* 放大 5% */\r\n}\r\n\r\n.title-cart {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.title-cart .btn {\r\n  color: #777;\r\n  border: none; /* 移除邊框 */\r\n  box-shadow: none; /* 移除按鈕的陰影，避免點擊後有陰影效果 */\r\n  outline: none; /* 避免點擊後有外框 */\r\n}\r\n.title-cart .btn:hover {\r\n  color: #eb9a7adc; /* 滑鼠懸停時的顏色變化 */\r\n}\r\n.title-cart .btn:focus {\r\n  outline: none; /* 移除點擊後的外框 */\r\n  box-shadow: none; /* 移除點擊後的陰影 */\r\n}\r\n.title-cart .btn i {\r\n  font-size: 16px;\r\n}\r\n.product-item p {\r\n  padding-top: 15px;\r\n  font-size: 15px;\r\n}\r\n.product-item p:hover {\r\n  color: #636161d5;\r\n  padding-top: 15px;\r\n}\r\n\r\n.product-placeholder {\r\n  flex: 1 1 calc(33.333% - 20px);\r\n  visibility: hidden; /* 隐藏占位符元素，但占空間 */\r\n}\r\n\r\n.price {\r\n  margin: 10px 0;\r\n  display: flex;\r\n}\r\n\r\n.btn-group-sm .btn {\r\n  margin-right: 5px;\r\n}\r\n.h5, .h6, .h7 {\r\n  font-size: 16px;\r\n}\r\n\r\n.h7 {\r\n  color: #CE0000;\r\n}\r\n@media (max-width: 768px) {\r\n  /* 調整 .container-inside 的顯示方式 */\r\n  .container-inside {\r\n    flex-direction: column;\r\n  }\r\n\r\n  /* 左側邊欄調整 */\r\n  .left-sidebar {\r\n    width: 100%; /* 使邊欄佔據整個螢幕寬度 */\r\n    margin-bottom: 20px; /* 增加下方距離 */\r\n  }\r\n\r\n  .left-sidebar hr {\r\n    width: 90%; /* 增加 hr 的寬度 */\r\n    margin-left: 5%; /* 確保 hr 保持居中 */\r\n  }\r\n\r\n  .search-area {\r\n    margin-left: 0;\r\n    width: 100%; /* 使搜尋區域佔據整個邊欄寬度 */\r\n  }\r\n\r\n  .search-area input {\r\n    width: calc(100% - 40px); /* 調整輸入框寬度以適應搜尋圖示 */\r\n    margin-left: 5%;\r\n  }\r\n\r\n  .search-icon {\r\n    right: 30px; /* 調整搜尋圖示的位置 */\r\n  }\r\n\r\n  .widget_categories ul li {\r\n    margin-left: 5%; /* 調整左邊距 */\r\n    width: 90%; /* 確保分類項目在小螢幕上保持適當的寬度 */\r\n  }\r\n\r\n  .widget-title {\r\n    padding-left: 5%; /* 調整標題的左邊距 */\r\n  }\r\n\r\n  /* 調整右側內容區域 */\r\n  .col-md-9 {\r\n    width: 100%; /* 使右側內容區域佔據整個螢幕寬度 */\r\n    margin-bottom: 20px; /* 增加下方距離 */\r\n  }\r\n\r\n  .content-top {\r\n    flex-direction: column; /* 改為垂直排列 */\r\n    align-items: flex-start; /* 左對齊 */\r\n  }\r\n\r\n  .main-title {\r\n    margin-bottom: 10px; /* 增加下方距離 */\r\n  }\r\n\r\n  .content-top-right {\r\n    margin-left: 0;\r\n  }\r\n\r\n  .breadcrumb {\r\n    margin-top: 10px; /* 增加上方距離 */\r\n  }\r\n\r\n  .product-grid {\r\n    gap: 10px; /* 調整商品間的間距 */\r\n  }\r\n\r\n  .product-item {\r\n    flex: 1 1 100%; /* 每個商品佔據整個螢幕寬度 */\r\n    padding: 5px; /* 減少內邊距 */\r\n  }\r\n\r\n  .product-item-list {\r\n    height: auto; /* 使商品圖片自適應高度 */\r\n  }\r\n\r\n  .title-cart {\r\n    flex-direction: column; /* 使商品標題與購物車按鈕垂直排列 */\r\n    align-items: flex-start; /* 左對齊 */\r\n  }\r\n\r\n  .title-cart p {\r\n    margin-bottom: 10px; /* 增加下方距離 */\r\n  }\r\n\r\n  .title-cart .btn {\r\n    margin-top: 5px; /* 增加上方距離 */\r\n  }\r\n\r\n  .price {\r\n    flex-direction: column; /* 價格信息垂直排列 */\r\n    align-items: flex-start; /* 左對齊 */\r\n  }\r\n\r\n  .h5, .h6, .h7 {\r\n    font-size: 14px; /* 調整字體大小 */\r\n  }\r\n\r\n  .product-placeholder {\r\n    display: none; /* 在手機版上隱藏占位符 */\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport cartMixin from '@/mixins/cartMixin'\r\n\r\nexport default {\r\n  emits: ['cart-updated'], // 在此處聲明自定義事件\r\n  data () {\r\n    return {\r\n      products: [],\r\n      product: {},\r\n      searchQuery: '', // 用來儲存輸入框的搜尋字串\r\n      search: '',\r\n      selectedCategory: '全部',\r\n      activeCategory: '全部', // 新增此變數來追蹤當前被點選的分類\r\n      isLoading: false,\r\n      cart: {},\r\n      showCart: false, // 控制購物車內容顯示的狀態變數\r\n      selectedSortOrder: '', // 預設排序方式\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getProducts (page = 1) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(url)\r\n        .then((response) => {\r\n          this.products = response.data.products\r\n          console.log('products:', response)\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/user/product/${id}`)\r\n    },\r\n    performSearch () {\r\n      this.search = this.searchQuery // 更新搜尋字串，觸發 filteredProducts 的重新計算\r\n    },\r\n    // 選擇分類\r\n    filterByCategory (category) {\r\n      this.selectedCategory = category\r\n      this.activeCategory = category // 設定當前被點選的分類\r\n    },\r\n    addCart (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(url, { data: cart })\r\n        .then((res) => {\r\n          this.status.loadingItem = ''\r\n          console.log('addcart-res', res)\r\n          return this.getCart() // 確保返回的 Promise 是 this.getCart()\r\n        })\r\n        .then((res) => {\r\n          this.$emit('cart-updated', this.cart) // 發射事件通知父組件\r\n          console.log('觸發addCart', this.cartItemCount)\r\n        })\r\n    },\r\n    sortProducts () {\r\n      switch (this.selectedSortOrder) {\r\n        case 'priceAsc':\r\n          this.products.sort((a, b) => a.price - b.price)\r\n          break\r\n        case 'priceDesc':\r\n          this.products.sort((a, b) => b.price - a.price)\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  },\r\n  computed: {\r\n    // 提取所有唯一的 category\r\n    // Set 是 JavaScript 的一種數據結構，它只允許唯一值（即不能有重複的值）\r\n    uniqueCategories () {\r\n      const categories = this.products.map((product) => product.category)\r\n      return ['全部', ...new Set(categories)]\r\n    },\r\n    // 過濾商品，顯示選中的分類\r\n    filteredProducts () {\r\n      return this.products.filter(product => {\r\n        const matchesCategory = this.selectedCategory === '全部' || product.category === this.selectedCategory\r\n        const matchesSearch = !this.search || product.title.toLowerCase().includes(this.search.toLowerCase())\r\n        return matchesCategory && matchesSearch\r\n      })\r\n    }\r\n  },\r\n  mixins: [cartMixin]\r\n}\r\n</script>\r\n","import { render } from \"./UserList.vue?vue&type=template&id=c6557af6\"\nimport script from \"./UserList.vue?vue&type=script&lang=js\"\nexport * from \"./UserList.vue?vue&type=script&lang=js\"\n\nimport \"./UserList.vue?vue&type=style&index=0&id=c6557af6&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["data","cart","isLoading","cartItemCount","status","loadingItem","methods","getCart","Promise","resolve","reject","url","this","$http","get","then","response","console","log","carts","reduce","total","item","qty","catch","error","created","class","id","_createElementVNode","for","value","disabled","_hoisted_15","_hoisted_16","_hoisted_17","key","role","_hoisted_30","_createElementBlock","_Fragment","_createVNode","_component_Loading","active","$data","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","type","name","placeholder","_cache","$event","searchQuery","onClick","args","$options","performSearch","_hoisted_7","_renderList","uniqueCategories","index","_normalizeClass","activeCategory","href","_withModifiers","filterByCategory","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","selectedSortOrder","onChange","sortProducts","_hoisted_18","_hoisted_19","_component_router_link","to","default","_withCtx","_createTextVNode","_","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","filteredProducts","_hoisted_24","style","_normalizeStyle","backgroundImage","imageUrl","getProduct","_hoisted_25","_hoisted_26","title","_hoisted_27","addCart","_hoisted_29","_hoisted_31","_createCommentVNode","_hoisted_32","_hoisted_28","_hoisted_33","price","_hoisted_34","_toDisplayString","origin_price","_hoisted_35","_hoisted_36","length","n","_hoisted_37","emits","products","product","search","selectedCategory","showCart","getProducts","page","$router","push","category","product_id","post","res","$emit","sort","a","b","computed","categories","map","Set","filter","matchesCategory","matchesSearch","toLowerCase","includes","mixins","cartMixin","__exports__","render"],"sourceRoot":""}