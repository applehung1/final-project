"use strict";(self["webpackChunkfinal_project"]=self["webpackChunkfinal_project"]||[]).push([[432],{7051:function(e,t,s){s.r(t),s.d(t,{default:function(){return M}});var i=s(6768),r=s(5130),a=s(4232);const o={class:"container"},c={class:"container-inside"},l={id:"sidebar",class:"left-sidebar col-md-3"},d=(0,i.Lk)("h4",{class:"widget-title"},"購買花禮Online Shop",-1),n=(0,i.Lk)("hr",null,null,-1),u={class:"search-area"},h={class:"widget_categories"},p=["onClick"],k={class:"col-md-9"},g={class:"content-top clearfix"},v=(0,i.Lk)("h1",{class:"main-title"},"購買花禮Online Shop",-1),m={class:"content-top-right"},C={class:"sort-block"},L=(0,i.Lk)("label",{for:"sortOrder"},"排序方式：",-1),f=(0,i.Lk)("option",{value:"",disabled:""},"請選擇排序方式",-1),y=(0,i.Lk)("option",{value:"priceAsc"},"價格由低到高",-1),b=(0,i.Lk)("option",{value:"priceDesc"},"價格由高到低",-1),I=[f,y,b],S={class:"breadcrumb"},O=(0,i.Lk)("li",null,"/",-1),w=(0,i.Lk)("li",null,"購買花禮Online Shop",-1),_=(0,i.Lk)("hr",null,null,-1),E={class:"product-grid"},P={class:"product-item-list"},X=["onClick"],$={class:"title-cart"},x=["onClick"],F={class:"actions"},Q=["disabled","onClick"],J={key:0,class:"spinner-grow spinner-grow-sm text-danger",role:"status"},A=(0,i.Lk)("span",{class:"visually-hidden"},"Loading...",-1),K=[A],N=(0,i.Lk)("i",{class:"bi bi-cart-fill"},null,-1),j=["onClick"],q={class:"price"},D={key:0,class:"h5"},U={key:1,class:"h6"},B={key:2,class:"h7"},V=(0,i.Lk)("div",{class:"my-5 row justify-content-center"},null,-1);function z(e,t,s,f,y,b){const A=(0,i.g2)("Loading"),z=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(A,{active:y.isLoading},null,8,["active"]),(0,i.Lk)("div",o,[(0,i.Lk)("div",c,[(0,i.Lk)("aside",l,[d,n,(0,i.Lk)("div",u,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",name:"name",placeholder:"(請輸入商品名稱)","onUpdate:modelValue":t[0]||(t[0]=e=>y.searchQuery=e)},null,512),[[r.Jo,y.searchQuery]]),(0,i.Lk)("i",{class:"bi bi-search search-icon",onClick:t[1]||(t[1]=(...e)=>b.performSearch&&b.performSearch(...e))})]),(0,i.Lk)("div",h,[(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(b.uniqueCategories,((e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t,class:(0,a.C4)({active:e===y.activeCategory})},[(0,i.Lk)("a",{href:"#",onClick:(0,r.D$)((t=>b.filterByCategory(e)),["prevent"])},(0,a.v_)(e),9,p)],2)))),128))])])]),(0,i.Lk)("div",k,[(0,i.Lk)("header",g,[v,(0,i.Lk)("div",m,[(0,i.Lk)("div",C,[L,(0,i.bo)((0,i.Lk)("select",{id:"sortOrder",class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>y.selectedSortOrder=e),onChange:t[3]||(t[3]=(...e)=>b.sortProducts&&b.sortProducts(...e))},I,544),[[r.u1,y.selectedSortOrder]])]),(0,i.Lk)("ul",S,[(0,i.Lk)("li",null,[(0,i.bF)(z,{class:"home-router-li",to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("首頁")])),_:1})]),O,w])])]),_,(0,i.Lk)("div",E,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(b.filteredProducts,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"product-item",key:e.id},[(0,i.Lk)("div",P,[(0,i.Lk)("div",{style:(0,a.Tr)([{height:"180px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}]),onClick:t=>b.getProduct(e.id)},null,12,X),(0,i.Lk)("div",$,[(0,i.Lk)("p",{onClick:t=>b.getProduct(e.id)},(0,a.v_)(e.title),9,x),(0,i.Lk)("div",F,[(0,i.Lk)("button",{type:"button",class:"btn",disabled:this.status.loadingItem===e.id,onClick:t=>b.addCart(e.id)},[this.status.loadingItem===e.id?((0,i.uX)(),(0,i.CE)("div",J,K)):(0,i.Q3)("",!0),N],8,Q),(0,i.Lk)("i",{class:(0,a.C4)(y.favoriteItems.includes(e.id)?"bi bi-suit-heart-fill":"bi bi-suit-heart"),onClick:t=>b.addFavorite(e.id)},null,10,j)])])]),(0,i.Lk)("div",q,[e.price?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",D,(0,a.v_)(e.origin_price),1)),e.price?((0,i.uX)(),(0,i.CE)("del",U,"$ "+(0,a.v_)(e.origin_price),1)):(0,i.Q3)("",!0),e.price?((0,i.uX)(),(0,i.CE)("div",B,"$ "+(0,a.v_)(e.price),1)):(0,i.Q3)("",!0)])])))),128)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(3-b.filteredProducts.length%3,(e=>((0,i.uX)(),(0,i.CE)("div",{key:`placeholder-${e}`,class:"product-placeholder"})))),128))])])]),V])],64)}s(4114),s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);var T=s(2389),W={emits:["cart-updated"],data(){return{products:[],product:{},searchQuery:"",search:"",selectedCategory:"全部",activeCategory:"全部",isLoading:!1,cart:{},showCart:!1,selectedSortOrder:"",status:{loadingItem:""},favoriteItems:[]}},methods:{getProducts(e=1){const t="https://vue3-course-api.hexschool.io/api/applehung1-api/products/all";this.isLoading=!0,this.$http.get(t).then((e=>{this.products=e.data.products,console.log("products:",e),this.isLoading=!1}))},getProduct(e){this.$router.push(`/user/product/${e}`)},performSearch(){this.search=this.searchQuery},filterByCategory(e){this.selectedCategory=e,this.activeCategory=e},addCart(e){const t="https://vue3-course-api.hexschool.io/api/applehung1-api/cart";this.status.loadingItem=e;const s={product_id:e,qty:1};this.$http.post(t,{data:s}).then((e=>(this.status.loadingItem="",console.log("addcart-res",e),this.getCart()))).then((e=>{this.$emit("cart-updated",this.cart),console.log("觸發addCart",this.cartItemCount)}))},sortProducts(){switch(this.selectedSortOrder){case"priceAsc":this.products.sort(((e,t)=>e.price-t.price));break;case"priceDesc":this.products.sort(((e,t)=>t.price-e.price));break;default:break}},addFavorite(e){const t=JSON.parse(localStorage.getItem("favoriteItems"))||[];if(t.includes(e)){const s=t.indexOf(e);s>-1&&(t.splice(s,1),localStorage.setItem("favoriteItems",JSON.stringify(t)),this.favoriteItems=t)}else t.push(e),localStorage.setItem("favoriteItems",JSON.stringify(t)),this.favoriteItems=t;console.log("favorite emit:",e)}},created(){this.getProducts(),this.favoriteItems=JSON.parse(localStorage.getItem("favoriteItems"))||[]},computed:{uniqueCategories(){const e=this.products.map((e=>e.category));return["全部",...new Set(e)]},filteredProducts(){return this.products.filter((e=>{const t="全部"===this.selectedCategory||e.category===this.selectedCategory,s=!this.search||e.title.toLowerCase().includes(this.search.toLowerCase());return t&&s}))}},mixins:[T.A]},G=s(1241);const H=(0,G.A)(W,[["render",z]]);var M=H}}]);
//# sourceMappingURL=432.2aebc538.js.map